<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Ari‚Äôs Phonics</title>
  <meta name="theme-color" content="#5f7cf3" />
  <style>
    :root {
      --bg: #0e1116;
      --card: #151a22;
      --ink: #e7eefc;
      --muted: #99a3b4;
      --brand: #5f7cf3;
      --good: #00c07f;
      --bad: #ff5a7a;
      --shadow: 0 10px 30px rgba(0,0,0,.35);
    }
    * { box-sizing: border-box; }
    html, body { height: 100%; }
    body {
      margin: 0; font-family: ui-rounded, system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial, "Apple Color Emoji", "Segoe UI Emoji";
      background: radial-gradient(1200px 800px at 20% -10%, #1b2230 0%, var(--bg) 60%) fixed;
      color: var(--ink);
    }
    .app { max-width: 820px; margin: 0 auto; padding: 20px; }
    header { display: flex; align-items: center; justify-content: space-between; gap: 10px; }
    h1 { font-size: clamp(22px, 3.4vw, 30px); margin: 12px 0; letter-spacing: .3px; }
    .tabs { display: flex; gap: 8px; }
    .tab {
      padding: 10px 14px; border-radius: 999px; background: #0c1016; color: var(--ink);
      border: 1px solid #202737; cursor: pointer; user-select: none; font-weight: 600;
      box-shadow: var(--shadow); transition: .2s transform;
    }
    .tab.active { background: linear-gradient(180deg, #1e2740, #121826); border-color: #2a3550; }
    .tab:active { transform: scale(.98); }

    .card {
      background: linear-gradient(180deg, #141a24, #111620);
      border: 1px solid #1d2533;
      border-radius: 18px; padding: 14px; box-shadow: var(--shadow);
    }
    .row { display: grid; grid-template-columns: 1fr; gap: 14px; }
    @media (min-width: 720px) { .row { grid-template-columns: 1.2fr .8fr; } }

    /* Learn panel */
    .learn-top { display: grid; grid-template-columns: auto 1fr auto; align-items: center; gap: 10px; }
    .big-letter {
      font-size: clamp(64px, 14vw, 140px);
      font-weight: 900; line-height: .9; letter-spacing: 1px;
      text-shadow: 0 12px 28px rgba(0,0,0,.5);
      background: linear-gradient(180deg, #ffffff, #d9e3ff);
      -webkit-background-clip: text; background-clip: text; color: transparent;
    }
    .img-wrap {
      display: grid; place-items: center; background: #0f1420; border-radius: 16px; padding: 12px;
      border: 1px solid #1f2838; min-height: 220px;
    }
    .img-wrap img {
      width: 100%; max-width: 360px; height: auto; display: block; border-radius: 12px;
    }
    .word { font-size: 28px; font-weight: 800; letter-spacing: .5px; margin: 6px 0 2px; }
    .hint { color: var(--muted); font-size: 14px; }

    .controls { display: flex; gap: 10px; flex-wrap: wrap; margin-top: 8px; }
    .btn {
      padding: 12px 14px; border-radius: 12px; border: 1px solid #26324b; background: #121a2a;
      color: var(--ink); font-weight: 700; cursor: pointer; box-shadow: var(--shadow);
      transition: .2s transform, .2s background;
    }
    .btn:active { transform: scale(.98); }
    .btn.primary { background: linear-gradient(180deg, #6b87ff, #546cee); border-color: #4f66db; color: #08102a; }
    .btn.good { background: linear-gradient(180deg, #03d192, #00b37a); border-color: #00a972; color: #071a14; }
    .btn.bad { background: linear-gradient(180deg, #ff7892, #ff5a7a); border-color: #ff3b63; color: #2b0010; }
    .grid-letters { display: grid; grid-template-columns: repeat(13, 1fr); gap: 6px; margin-top: 8px; }
    .mini {
      padding: 8px 0; text-align: center; border-radius: 10px; background: #0b1018; border: 1px solid #1a2232;
      cursor: pointer; font-weight: 800; letter-spacing: .4px;
    }
    .mini.active { outline: 2px solid var(--brand); background: #111a2a; }

    /* Match Game */
    .game {
      display: grid; grid-template-columns: 1fr; gap: 14px;
    }
    .board {
      display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px;
    }
    .tile {
      background: #0f1521; border: 1px solid #223049; border-radius: 14px; padding: 10px;
      display: grid; place-items: center; min-height: 110px; cursor: pointer;
      transition: .2s transform, .2s background;
    }
    .tile.correct { background: #0f1f1a; border-color: #186a4c; }
    .tile img { max-width: 100%; max-height: 96px; }
    .word-chip {
      font-weight: 800; padding: 10px; border-radius: 12px; border: 1px dashed #2b3a56; background: #10192a; text-align: center;
    }
    footer { margin: 16px 0 30px; text-align: center; color: var(--muted); font-size: 12px; }
  </style>
</head>
<body>
<div class="app">
  <header>
    <h1>Ari‚Äôs Phonics</h1>
    <div class="tabs">
      <button id="tabLearn" class="tab active" onclick="showTab('learn')">Learn</button>
      <button id="tabMatch" class="tab" onclick="showTab('match')">Match</button>
    </div>
  </header>

  <div id="learn" class="row">
    <div class="card">
      <div class="learn-top">
        <button class="btn" onclick="prevLetter()">‚¨ÖÔ∏é</button>
        <div class="big-letter" id="bigLetter">A</div>
        <button class="btn" onclick="nextLetter()">‚û°Ô∏é</button>
      </div>

      <div class="img-wrap" style="margin-top:10px">
        <img id="pic" alt="" />
      </div>
      <div class="word" id="word">apple</div>
      <div class="hint" id="hint">/a/ as in apple</div>

      <div class="controls">
        <button class="btn primary" onclick="speakCurrent()">üîä Say it</button>
        <button class="btn" onclick="nextExample()">Next example</button>
        <button class="btn" onclick="shuffleLetter()">Shuffle letter</button>
      </div>
      <div class="grid-letters" id="gridLetters"></div>
    </div>

    <div class="card">
      <h3 style="margin:6px 0 8px">Parent tips</h3>
      <ul style="margin:0 0 6px 18px; line-height:1.5">
        <li>Use an Aussie voice (/en-AU/).</li>
        <li>Say the sound (not the letter name), then the word: ‚Äú/a/ ‚Ä¶ apple‚Äù.</li>
        <li>Keep sessions short and fun‚Äîstop while he‚Äôs still keen.</li>
      </ul>
      <button class="btn good" onclick="startQuickDrill()">Start 60-sec quick drill</button>
      <div id="drillTimer" class="hint" style="margin-top:6px;"></div>
    </div>
  </div>

  <div id="match" class="card" style="display:none">
    <div class="game">
      <div style="display:flex;align-items:center;justify-content:space-between;gap:8px;">
        <div>
          <div style="font-weight:800">Match the pictures to the words</div>
          <div class="hint">Tap a picture, then its word.</div>
        </div>
        <button class="btn" onclick="newRound()">New round</button>
      </div>
      <div class="board" id="boardImgs"></div>
      <div class="board" id="boardWords"></div>
      <div class="hint" id="scoreHint"></div>
    </div>
  </div>

  <footer>Images: Public-domain clipart (Openclipart).</footer>
</div>

<script>
/** PUBLIC-DOMAIN image URLs (Openclipart). One strong example per letter for clean visuals. */
const PD = {
  A: [{word: "apple", img: "https://openclipart.org/image/400px/293547"}],
  B: [{word: "ball", img: "https://openclipart.org/image/300px/svg_to_png/458517"}],
  C: [{word: "cat", img: "https://openclipart.org/image/400px/175527"}],
  D: [{word: "dog", img: "https://openclipart.org/image/300px/svg_to_png/305838"}],
  E: [{word: "egg", img: "https://openclipart.org/image/400px/251621"}],
  F: [{word: "fish", img: "https://openclipart.org/image/400px/223934"}],
  G: [{word: "goat", img: "https://openclipart.org/image/300px/svg_to_png/316097"}],
  H: [{word: "hat",  img: "https://openclipart.org/image/300px/svg_to_png/179201"}],
  I: [{word: "igloo", img: "https://openclipart.org/image/300px/svg_to_png/320635"}],
  J: [{word: "jam",  img: ""}],                           // (fallback card until we add an image)
  K: [{word: "kite", img: "https://openclipart.org/image/300px/svg_to_png/311549"}],
  L: [{word: "lion", img: "https://openclipart.org/image/300px/svg_to_png/287219"}],
  M: [{word: "moon", img: "https://openclipart.org/image/400px/150367"}],
  N: [{word: "nest", img: "https://openclipart.org/image/400px/177776"}],
  O: [{word: "owl",  img: "https://openclipart.org/image/400px/17566"}],
  P: [{word: "pig",  img: "https://openclipart.org/image/400px/201651"}],
  Q: [{word: "queen", img: ""}],                          // (fallback card‚Äîfor now)
  R: [{word: "ring", img: "https://openclipart.org/image/400px/229221"}],
  S: [{word: "sun",  img: "https://openclipart.org/image/400px/176488"}],
  T: [{word: "tiger", img: ""}],                          // (fallback card‚Äîfor now)
  U: [{word: "umbrella", img: "https://openclipart.org/image/400px/103813"}],
  V: [{word: "van", img: "https://openclipart.org/image/400px/283135"}],
  W: [{word: "whale", img: "https://openclipart.org/image/400px/257334"}],
  X: [{word: "xylophone", img: "https://openclipart.org/image/400px/280532"}],
  Y: [{word: "yarn", img: "https://openclipart.org/image/400px/178389"}],
  Z: [{word: "zebra", img: ""}]                           // (fallback card‚Äîfor now)
};

const letters = Object.keys(PD);
let idx = 0;
let exIdx = 0;

const elBig   = document.getElementById("bigLetter");
const elPic   = document.getElementById("pic");
const elWord  = document.getElementById("word");
const elHint  = document.getElementById("hint");
const grid    = document.getElementById("gridLetters");

letters.forEach((L, i) => {
  const b = document.createElement("button");
  b.className = "mini";
  b.textContent = L;
  b.onclick = () => { idx = i; exIdx = 0; render(); speakCurrent(); };
  grid.appendChild(b);
});
function markActive() {
  [...grid.children].forEach((b,i)=> b.classList.toggle("active", i===idx));
}
function currentData() { return PD[letters[idx]]; }
function currentExample() { return currentData()[exIdx % currentData().length]; }

function render() {
  const L = letters[idx];
  const ex = currentExample();
  elBig.textContent = L;
  elWord.textContent = ex.word;
  elHint.textContent = `/${L.toLowerCase()}/ as in ${ex.word}`;
  if (ex.img) {
    elPic.src = ex.img;
    elPic.style.opacity = "1";
  } else {
    elPic.removeAttribute("src");
    // Show a crisp fallback card if we don‚Äôt have an image yet
    elPic.alt = `${L} is for ${ex.word}`;
    elPic.style.opacity = "0";
    document.querySelector(".img-wrap").style.background =
      "repeating-linear-gradient(135deg,#0f1521,#0f1521 8px,#0c111a 8px,#0c111a 16px)";
  }
  document.querySelector(".img-wrap").style.borderColor = "#1f2838";
  markActive();
}
function nextLetter(){ idx = (idx + 1) % letters.length; exIdx = 0; render(); }
function prevLetter(){ idx = (idx - 1 + letters.length) % letters.length; exIdx = 0; render(); }
function nextExample(){ exIdx++; render(); speakCurrent(); }
function shuffleLetter(){ idx = Math.floor(Math.random()*letters.length); exIdx = 0; render(); speakCurrent(); }

function speak(text, rate=0.9) {
  try {
    const u = new SpeechSynthesisUtterance(text);
    u.lang = "en-AU";
    u.rate = rate;
    speechSynthesis.cancel();
    speechSynthesis.speak(u);
  } catch(e) {}
}
function speakCurrent(){
  const L = letters[idx];
  const {word} = currentExample();
  speak(`${L}. ${word}. ${L} says ${L.toLowerCase()}. ${word}.`, 0.92);
}

/* Quick Drill */
let drillTimerId = null;
function startQuickDrill() {
  let secs = 60;
  const box = document.getElementById("drillTimer");
  if (drillTimerId) clearInterval(drillTimerId);
  box.textContent = "Go! 60 seconds‚Ä¶";
  speak("Quick drill! Say the sounds with me.");
  drillTimerId = setInterval(() => {
    secs--;
    if (secs <= 0) {
      clearInterval(drillTimerId);
      box.textContent = "Nice work!";
      speak("Nice work! High five!");
      return;
    }
    if (secs % 3 === 0) shuffleLetter();
    box.textContent = `Time left: ${secs}s`;
  }, 1000);
}

/* Matching game: pick 3 letters that have images */
const imgWords = Object.entries(PD)
  .filter(([L, arr]) => arr[0]?.img)
  .map(([L, arr]) => ({ L, word: arr[0].word, img: arr[0].img }));

const boardImgs = document.getElementById("boardImgs");
const boardWords = document.getElementById("boardWords");
const scoreHint = document.getElementById("scoreHint");
let gamePairs = [];
let firstPick = null;
let score = 0;

function newRound() {
  // pick 3 random unique items with images
  const pool = imgWords.slice();
  for (let i = pool.length - 1; i > 0; i--) {
    const j = Math.floor(Math.random() * (i + 1)); [pool[i], pool[j]] = [pool[j], pool[i]];
  }
  gamePairs = pool.slice(0, 3);
  score = 0;
  scoreHint.textContent = "0 / 3";
  boardImgs.innerHTML = "";
  boardWords.innerHTML = "";

  // images
  gamePairs.forEach(item => {
    const t = document.createElement("div");
    t.className = "tile";
    t.dataset.key = item.word;
    const img = document.createElement("img");
    img.src = item.img;
    img.alt = item.word;
    t.appendChild(img);
    t.onclick = () => pickTile(t, "img");
    boardImgs.appendChild(t);
  });

  // words (shuffled)
  const shuffled = gamePairs.slice().sort(()=>Math.random()-0.5);
  shuffled.forEach(item => {
    const t = document.createElement("div");
    t.className = "tile word-chip";
    t.dataset.key = item.word;
    t.textContent = item.word;
    t.onclick = () => pickTile(t, "word");
    boardWords.appendChild(t);
  });
}

function pickTile(el, kind) {
  if (!firstPick) {
    firstPick = { el, kind };
    el.style.outline = "2px solid var(--brand)";
    speak(el.dataset.key);
    return;
  }
  // second pick
  const match = (firstPick.el.dataset.key === el.dataset.key) && (firstPick.kind !== kind);
  if (match) {
    firstPick.el.classList.add("correct");
    el.classList.add("correct");
    firstPick.el.style.outline = el.style.outline = "none";
    firstPick.el.onclick = el.onclick = null;
    score++;
    speak(`Yes, ${el.dataset.key}!`);
  } else {
    speak("Try again");
    firstPick.el.style.outline = "none";
  }
  firstPick = null;
  scoreHint.textContent = `${score} / 3`;
}

function showTab(which){
  document.getElementById("learn").style.display = which==="learn" ? "" : "none";
  document.getElementById("match").style.display = which==="match" ? "" : "none";
  document.getElementById("tabLearn").classList.toggle("active", which==="learn");
  document.getElementById("tabMatch").classList.toggle("active", which==="match");
  if (which==="match") newRound();
}

/* Preload PD images for snappy UX */
(function preload(){
  Object.values(PD).flat().forEach(ex => {
    if (ex.img) { const i = new Image(); i.src = ex.img; }
  });
})();

/* Start */
render();
speakCurrent();
</script>
</body>
</html>
